<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Halloween Click Game ğŸƒ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Halloween Clicker ğŸƒğŸ‘»</h1>
    <div class="subtitle">Click bÃ­ ngÃ´ Ä‘á»ƒ + Ä‘iá»ƒm, trÃ¡nh báº¥m nháº§m ma nha!</div>

    <div class="status-bar">
      <div class="status-item">
        Äiá»ƒm: <span id="score">0</span>
      </div>
      <div class="status-item">
        Thá»i gian: <span id="time">30</span>s
      </div>
    </div>

    <div id="message"></div>

    <div id="gameArea"></div>

    <div class="controls">
      <button id="startBtn">Báº¯t Ä‘áº§u chÆ¡i</button>
    </div>

    <div class="tip">
      ğŸ¯ BÃ­ ngÃ´: <span class="highlight">+10 Ä‘iá»ƒm</span> â€¢ ğŸ‘» Ma: 
      <span class="highlight">-10 Ä‘iá»ƒm</span> â€¢ Thá»i gian: 
      <span class="highlight">30s</span>
    </div>
  </div>

  <script>
    const gameArea = document.getElementById("gameArea");
    const scoreEl = document.getElementById("score");
    const timeEl = document.getElementById("time");
    const messageEl = document.getElementById("message");
    const startBtn = document.getElementById("startBtn");

    let score = 0;
    let timeLeft = 30; // âœ… váº«n 30s
    let gameInterval = null;
    let spawnInterval = null;
    let isPlaying = false;

    function resetGame() {
      score = 0;
      timeLeft = 30;
      scoreEl.textContent = score;
      timeEl.textContent = timeLeft;
      messageEl.textContent = "";
      gameArea.innerHTML = "";
    }

    function endGame() {
      isPlaying = false;
      clearInterval(gameInterval);
      clearInterval(spawnInterval);

      gameArea.innerHTML = "";

      if (score >= 250) {
        messageEl.textContent = "Quá»· vÆ°Æ¡ng sÄƒn bÃ­, ná»ƒ luÃ´n! ğŸ”¥";
      } else if (score >= 150) {
        messageEl.textContent = "Ráº¥t gÃ¬ vÃ  nÃ y ná», Halloween nÃ y full káº¹o ğŸ¬";
      } else if (score > 0) {
        messageEl.textContent = "á»”n Ã¡p, nhÆ°ng cÃ²n lÃªn Ä‘Æ°á»£c ná»¯a ğŸ˜¼";
      } else {
        messageEl.textContent = "Ma nÃ³ bÃ³n hÃ nh cho báº¡n rá»“i... ğŸ˜­";
      }

      startBtn.textContent = "ChÆ¡i láº¡i";
    }

    function spawnEntity() {
      if (!isPlaying) return;

      const entity = document.createElement("div");
      entity.classList.add("entity");

      // tÄƒng tá»‰ lá»‡ ma: ~55% bÃ­, 45% ma
      const isPumpkin = Math.random() < 0.55;

      if (isPumpkin) {
        entity.classList.add("pumpkin");
        entity.textContent = "ğŸƒ";
      } else {
        entity.classList.add("ghost");
        entity.textContent = "ğŸ‘»";
      }

      const areaRect = gameArea.getBoundingClientRect();
      const size = 50;
      const maxX = areaRect.width - size - 8;
      const maxY = areaRect.height - size - 8;
      const x = Math.random() * maxX + 4;
      const y = Math.random() * maxY + 4;

      entity.style.left = x + "px";
      entity.style.top = y + "px";

      entity.addEventListener("click", (e) => {
        if (!isPlaying) return;
        e.stopPropagation();

        if (entity.classList.contains("pumpkin")) {
          score += 10; // +10
          messageEl.textContent = "Chuáº©n! +10 Ä‘iá»ƒm tá»« bÃ­ ngÃ´ ğŸƒ";
        } else {
          score -= 10; // -10
          messageEl.textContent = "Trá»i Æ¡i báº¥m trÃºng ma, -10 Ä‘iá»ƒm ğŸ‘»";
        }

        scoreEl.textContent = score;
        entity.remove();
      });

      // tá»“n táº¡i ngáº¯n hÆ¡n â†’ khÃ³ hÆ¡n
      setTimeout(() => {
        if (entity.parentElement === gameArea) {
          entity.remove();
        }
      }, 800); // nhanh tay má»›i ká»‹p click

      gameArea.appendChild(entity);
    }

    function startGame() {
      if (isPlaying) return;

      resetGame();
      isPlaying = true;
      startBtn.textContent = "Äang chÆ¡i...";

      gameInterval = setInterval(() => {
        timeLeft--;
        timeEl.textContent = timeLeft;

        if (timeLeft <= 0) {
          timeEl.textContent = 0;
          endGame();
        }
      }, 1000);

      // spawn nhanh hÆ¡n + cÃ³ lÃºc ra 2â€“3 con
      spawnInterval = setInterval(() => {
        const rand = Math.random();
        let amount = 1;
        if (rand < 0.5) amount = 2;
        if (rand < 0.2) amount = 3;

        for (let i = 0; i < amount; i++) {
          spawnEntity();
        }
      }, 400); // trÆ°á»›c lÃ  600ms

      messageEl.textContent = "Hard mode 30s: táº­p trung cao Ä‘á»™!";
    }

    startBtn.addEventListener("click", startGame);
  </script>
</body>
</html>
